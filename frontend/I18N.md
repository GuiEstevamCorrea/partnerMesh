# InternacionalizaÃ§Ã£o (i18n) - PartnerMesh Frontend

Este documento explica como usar o sistema de internacionalizaÃ§Ã£o implementado no projeto.

## ğŸ“š Idiomas Suportados

- ğŸ‡§ğŸ‡· PortuguÃªs Brasileiro (pt-BR) - **PadrÃ£o**
- ğŸ‡ºğŸ‡¸ InglÃªs (en)
- ğŸ‡ªğŸ‡¸ Espanhol (es)

## ğŸš€ Como Usar

### 1. Hook useI18n

O hook personalizado `useI18n` fornece todas as funcionalidades de traduÃ§Ã£o e formataÃ§Ã£o:

```tsx
import { useI18n } from '@/hooks/useI18n';

function MyComponent() {
  const { t, formatCurrency, formatDate, currentLanguage, changeLanguage } = useI18n();

  return (
    <div>
      <h1>{t('common.welcome')}</h1>
      <p>{formatCurrency(1000)}</p>
      <p>{formatDate(new Date())}</p>
      <p>{t('common.currentLanguage')}: {currentLanguage}</p>
    </div>
  );
}
```

### 2. FunÃ§Ãµes DisponÃ­veis

#### `t(key, options?)`
Traduz uma chave para o idioma atual.

```tsx
// Simples
{t('common.save')} // "Salvar"

// Com interpolaÃ§Ã£o
{t('payments.paymentConfirmation', { count: 5 })} 
// "Tem certeza que deseja processar 5 pagamento(s)?"

// Com fallback
{t('unknown.key', 'Fallback text')}
```

#### `formatCurrency(value)`
Formata nÃºmeros como moeda baseado no idioma.

```tsx
{formatCurrency(1234.56)}
// pt-BR: "R$ 1.234,56"
// en: "$1,234.56"
// es: "1.234,56 â‚¬"
```

#### `formatDate(date, pattern?)`
Formata datas baseado no idioma.

```tsx
{formatDate(new Date(), 'dd/MM/yyyy')}
// pt-BR: "03/01/2026"
// en: "01/03/2026"
// es: "03/01/2026"
```

#### `formatDateTime(date)`
Formata data e hora.

```tsx
{formatDateTime(new Date())}
// pt-BR: "03/01/2026 14:30"
// en: "01/03/2026 14:30"
```

#### `translateStatus(status, context?)`
Traduz status dinamicamente.

```tsx
{translateStatus('paid', 'payments')}
// "Pago" (pt-BR) | "Paid" (en) | "Pagado" (es)
```

#### `changeLanguage(language)`
Muda o idioma da aplicaÃ§Ã£o.

```tsx
<button onClick={() => changeLanguage('en')}>
  English
</button>
```

### 3. Componente LanguageSelector

Seletor de idioma jÃ¡ pronto para usar:

```tsx
import { LanguageSelector } from '@/components/common/LanguageSelector';

function Header() {
  return (
    <header>
      <LanguageSelector />
    </header>
  );
}
```

## ğŸ“ Estrutura das TraduÃ§Ãµes

Os arquivos de traduÃ§Ã£o estÃ£o em `src/i18n/locales/`:

```
src/i18n/
â”œâ”€â”€ locales/
â”‚   â”œâ”€â”€ pt-BR.json  # PortuguÃªs
â”‚   â”œâ”€â”€ en.json     # InglÃªs
â”‚   â””â”€â”€ es.json     # Espanhol
â””â”€â”€ index.ts        # ConfiguraÃ§Ã£o
```

### Estrutura dos arquivos JSON

```json
{
  "common": {
    "save": "Salvar",
    "cancel": "Cancelar",
    "loading": "Carregando..."
  },
  "navigation": {
    "dashboard": "Dashboard",
    "partners": "Parceiros"
  },
  "partners": {
    "title": "Parceiros",
    "addPartner": "Adicionar Parceiro",
    "form": {
      "name": "Nome",
      "email": "Email"
    },
    "validation": {
      "nameRequired": "Nome Ã© obrigatÃ³rio"
    }
  }
}
```

## ğŸ¯ Exemplos PrÃ¡ticos

### Exemplo 1: PÃ¡gina com FormulÃ¡rio

```tsx
import { useI18n } from '@/hooks/useI18n';
import { z } from 'zod';

export function PartnerForm() {
  const { t } = useI18n();

  const schema = z.object({
    name: z.string().min(1, t('partners.validation.nameRequired')),
    email: z.string().email(t('partners.validation.emailInvalid'))
  });

  return (
    <form>
      <h1>{t('partners.title')}</h1>
      <input placeholder={t('partners.form.namePlaceholder')} />
      <button>{t('common.save')}</button>
    </form>
  );
}
```

### Exemplo 2: Tabela com Dados

```tsx
import { useI18n } from '@/hooks/useI18n';

export function PaymentsList({ payments }) {
  const { t, formatCurrency, formatDate } = useI18n();

  return (
    <table>
      <thead>
        <tr>
          <th>{t('payments.table.recipient')}</th>
          <th>{t('payments.table.value')}</th>
          <th>{t('payments.table.date')}</th>
          <th>{t('payments.table.status')}</th>
        </tr>
      </thead>
      <tbody>
        {payments.map(payment => (
          <tr key={payment.id}>
            <td>{payment.recipient}</td>
            <td>{formatCurrency(payment.value)}</td>
            <td>{formatDate(payment.date)}</td>
            <td>{t(`payments.status.${payment.status}`)}</td>
          </tr>
        ))}
      </tbody>
    </table>
  );
}
```

### Exemplo 3: Toast com TraduÃ§Ã£o

```tsx
import { useI18n } from '@/hooks/useI18n';
import { useToast } from '@/components/common/Toast';

export function SaveButton() {
  const { t } = useI18n();
  const { showToast } = useToast();

  const handleSave = async () => {
    try {
      await saveData();
      showToast('success', t('common.success'));
    } catch (error) {
      showToast('error', t('errors.generic'));
    }
  };

  return (
    <button onClick={handleSave}>
      {t('common.save')}
    </button>
  );
}
```

## ğŸ†• Adicionando Novas TraduÃ§Ãµes

### 1. Adicione a chave em todos os idiomas

**pt-BR.json**
```json
{
  "myFeature": {
    "title": "Minha Funcionalidade",
    "description": "DescriÃ§Ã£o em portuguÃªs"
  }
}
```

**en.json**
```json
{
  "myFeature": {
    "title": "My Feature",
    "description": "Description in English"
  }
}
```

**es.json**
```json
{
  "myFeature": {
    "title": "Mi Funcionalidad",
    "description": "DescripciÃ³n en espaÃ±ol"
  }
}
```

### 2. Use no componente

```tsx
{t('myFeature.title')}
{t('myFeature.description')}
```

## ğŸ”§ ConfiguraÃ§Ã£o

A configuraÃ§Ã£o do i18n estÃ¡ em `src/i18n/index.ts`:

```typescript
i18n
  .use(LanguageDetector) // Detecta idioma do navegador
  .use(initReactI18next) // Integra com React
  .init({
    resources,
    fallbackLng: 'pt-BR', // Idioma padrÃ£o
    detection: {
      order: ['localStorage', 'navigator', 'htmlTag'],
      lookupLocalStorage: 'i18nextLng',
      caches: ['localStorage']
    }
  });
```

## ğŸ’¡ Boas PrÃ¡ticas

1. **Sempre use chaves de traduÃ§Ã£o**, nunca texto hardcoded
2. **Organize as chaves por contexto** (common, navigation, partners, etc.)
3. **Use interpolaÃ§Ã£o** para textos dinÃ¢micos
4. **Mantenha consistÃªncia** entre os idiomas
5. **Use o hook useI18n** ao invÃ©s de usar react-i18next diretamente
6. **Formate valores** com as funÃ§Ãµes do hook (formatCurrency, formatDate)

## ğŸ“¦ PersistÃªncia

O idioma selecionado Ã© salvo no `localStorage` e serÃ¡ mantido entre sessÃµes:

```typescript
// O idioma Ã© salvo automaticamente quando alterado
changeLanguage('en'); // Salva 'en' no localStorage

// Na prÃ³xima visita, o idioma serÃ¡ carregado automaticamente
```

## ğŸŒ Detectando Idioma do Navegador

O sistema detecta automaticamente o idioma do navegador do usuÃ¡rio na primeira visita, seguindo esta ordem de prioridade:

1. localStorage (se jÃ¡ foi selecionado antes)
2. Idioma do navegador (navigator.language)
3. Tag HTML lang
4. Idioma padrÃ£o (pt-BR)

## ğŸ¨ CustomizaÃ§Ã£o do Seletor de Idioma

O componente LanguageSelector pode ser customizado:

```tsx
<LanguageSelector className="custom-class" />
```

Para adicionar um novo idioma:

1. Crie o arquivo JSON em `src/i18n/locales/`
2. Adicione no `src/i18n/index.ts`
3. Adicione no array de idiomas do `LanguageSelector.tsx`

---

**Desenvolvido para PartnerMesh** ğŸŒ